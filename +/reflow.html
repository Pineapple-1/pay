<style>
    /* apply extra formatting to fix divs in place while font size changes within them */
    .memo {
        height: 31px;
    }
    .payee {
        height: 29px
    }
    .amount {
        height: 32px;
    }
    .amounts {
        height: 31px;
    }
    .endorse {
        height: 48px;
    }
    .endorse.overflow .font {
        height: 48px;
        display: flex;
        align-items: flex-end; /* stick text to bottom of box even as it shrinks */
    }

    .amount.overflow, .amounts.overflow {
        display: flex;
        align-items: center;
        text-align: center;
    }

    .amount.overflow .font {
        left: 10px; /* scoot full width text over a smidge */
    }
</style>
<script>
// ;(function(){
    $('.amount, .amounts, .memo, .payee, .signature, .endorse').each(function(){
        this.addEventListener('keyup', () => reflow(this))
        this.firstElementChild.addEventListener('blur', () => reflow(this))
        reflow(this);
    })

    function reflow(field){
        var $field = $(field); // jqueryify the selected element once, this is the wrapper around the div.font
        var $font = $(field.firstElementChild); // the div.font, direct parent of the text node
        var text = field.firstElementChild.firstChild; // the text node
        if(!text){  /* reset things and exit if field is empty */
            $font.css('font-size','');
            $field.removeClass('overflow');
            return;
        }

        var current, original, scaled, factor;
        
        current = parseFloat($font.css('font-size')); // will return calc(Xpx) if scaled has been applied, or px units if no scaled has been applied
        original = parseFloat($field.css('font-size')); // get the unmodified font size in px units // I'm using the font-size of the parent element as original, because this reads the calculated size
        
        // I need to recalculate what font-size will fit within the box -- but if the result of multiplying the current by the factor is bigger than the original, then just use original
        // calculation will be based on what the CURRENT font-size needs to be multiplied by,
        // we'll grab the ORIGINAL font-size after getting the factor - and then set the current back to where it was so fast there should be no indication it was ever reset thanks to transistion timing
        var range = document.createRange();
        range.setStart(text, 0);
        range.setEnd(text, text.length);

        var fieldSize = field.getBoundingClientRect();
        var textSize = range.getBoundingClientRect();

        if($field.hasClass('endorse')){
            factor = fieldSize.height / textSize.height; // lol we're sideways
        } else {
            factor = fieldSize.width / textSize.width;
        }

        scaled = (current * factor * .9).toFixed(2); // 0.9 is a fudge factor

        if(scaled > original){
            // reflow size would be larger than original, which means there would be no overflow with original size. remove overflow styling and exit
            $field.removeClass('overflow');
            $font.css('font-size',''); // clear any existing font-size rule
        } else {
            // if reflow'd font-size is less than original, then we better used the reflow'd font-size to fit in the box, and add overflow styling
            $field.addClass('overflow');
            $font.css('font-size', scaled + 'px')
        }
    }
// })();
</script>